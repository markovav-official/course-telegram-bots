## **Теория**

### **Виртуальное окружение**

До настоящего момента, мы работали только со встроенными пакетами `python`. Но в реальных проектах, программисты нередко пользуются функционалом предоставляемым сторонними пакетами. Для того, чтобы не засорять систему, а также не конфликтовать с другими проектами, используют виртуальные окружения.

Виртуальное окружение в `python` представляет собой папку, в которой находятся все необходимые файлы для работы с пакетами. Все пакеты, которые мы установим в виртуальное окружение, будут доступны только в этом окружении. 

Стандартным инструментом для работы с виртуальными окружениями в `python` является `venv`. **Создадим виртуальное окружение** в папке `my-venv` при помощи команды

```shell
python -m venv my-venv
```

Чтобы начать пользоваться или, правильнее сказать, **активировать виртуальное окружение**, нужно выполнить команду

В операционной системе `Windows`:

```shell
my-venv/Scripts/activate
```
> Необязательно называть виртуальное окружение `my-venv`, можно выбрать любое другое название, например `venv` или `my-bot-venv`, в этом случае, в команде активации нужно будет указать другое название

### **Установка пакетов**

После активации виртуального окружения, мы можем устанавливать в него пакеты. В `python` для этого есть инструмент `pip`. Чтобы прии помощи него установить пакет, нужно выполнить команду

```shell
pip install <имя_пакета>
```

Например, установим пакет `python-telegram-bot`:

```shell
pip install python-telegram-bot
```

Однако нам понадобится несколько пакетов, поэтому установим их сразу всех из файла `requirements.txt`:

```shell
pip install -r requirements.txt
```

> В файле `requirements.txt` указаны все пакеты, которые нужны для работы с ботом


### **Импорт пакетов**

После установки пакетов, мы можем импортировать их в наш код. Для этого нужно написать в начале файла `import <имя_пакета>`.
Например, импортируем пакет `this`:

```python
import this
```
Вывод:

```
The Zen of Python, by Tim Peters

Beautiful is better than ugly.
Explicit is better than implicit.
Simple is better than complex.
...
```
> Это пасхалка, которая позволяет вывести на экран текст `The Zen of Python` - философию языка `python`

Или, например пакет `python-telegram-bot`:

```python
import telegram
```

> Как видите, иногда название пакета в `python` отличается от названия пакета в `pip`. Например, пакет `python-telegram-bot` импортируется как `telegram`.

Помимо этого, можно импортировать конкретные функции из пакета. Например, импортируем функцию `abs` из пакета `math`:

```python
from math import abs
print(abs(-5))
```

Вывод:

```
5
```
Как вы понимаете, функция `abs` возвращает модуль числа. По аналогии в будущем мы будем импортировать функции и классы из пакета `telegram.ext`:

```python
from telegram.ext import ApplicationBuilder, CommandHandler
```

### **Создание бота в [@BotFather](https://t.me/BotFather)**

Для того, чтобы создать бота, нужно написать боту [@BotFather](https://t.me/BotFather)

1. Отправьте команду `/newbot`.

2. Придумайте и отправьте имя бота. Имя может быть любым, оно будет отображаться в списке чатов.

3. Придумайте уникальный `username` бота. Он должен заканчиваться на `bot` и быть уникальным. Например, `my_test_bot_123_bot` или `MyVeryUniqueBot`. Это будет уникальный `alias` бота, по которому его можно будет найти в поиске.

4. После этого [@BotFather](https://t.me/BotFather) отправит вам сообщение об успешном создании и токен вашего бота. Токен нужен для того, чтобы мы могли выполнять запросы к серверу `Telegram` от имени бота.

> Токен имеет следующий формат:
> `1234567890:ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890`

> Можно скопировать токен в буфер обмена, нажав на него в чате с [@BotFather](https://t.me/BotFather)

### **Бот отвечающий на команду `/start`**

Следующий блок кода это шаблон для бота, отвечающего на команду `/start`:

```python
from telegram import Update
from telegram.ext import ApplicationBuilder, CommandHandler, ContextTypes

# Сюда нужно вставить токен для доступа к боту, который вы получили от @BotFather
BOT_TOKEN = "1234567890:ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890"


async def start_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    pass


# Входная точка программы
if __name__ == "__main__":
    # Создаем объект приложения с ключом доступа к боту
    application = ApplicationBuilder().token(BOT_TOKEN).build()

    # Добавляем обработчик команды /start
    application.add_handler(CommandHandler("start", start_command))

    # Запускаем приложение
    application.run_polling()
```

> Конструкция `if __name__ == "__main__":` является входной точкой программы. Все, что находится внутри этой конструкции, будет выполнено при запуске этого файла.

### Реализация команды `/start`

В телеграме команда `/start` вызывается при первом запуске бота (при нажатии на кнопку *Запустить* и при последующих отправках команды в чате). Давайте научим бота отвечать на эту команду.

Для этого в функции `start_command` нужно отправить сообщение пользователю:
```python
async def start_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.effective_chat.send_message(text="Привет! Я бот :)")
```

Асинхронная функция `async` и оператор `await` позволяет получить результат функции, при этом не блокируя выполнение всей программы

`update` - объект, который содержит информацию о действии пользователя в боте
`context` - объект, который содержит информацию о боте, в котором происходит действие

`effective_chat` - чат, в котором произошло действие и информация о нем (новое сообщение, редактирование сообщения, нажатие на кнопку и т.д.)
    

### **Запуск бота**

Для запуска бота нужно выполнить команду

```shell
python 03-start-bot.py
```

После запуска бота, он будет отвечать на команду `/start` сообщением `Привет! Я бот :)`

## Задание:

- В файле `03-start-bot.py`

- Добавьте обработчик команды /help, который будет отвечать на сообщение "Я помогу тебе с любым вопросом"

## Ожидаемый результат:

При запуске команды

```shell
python 03-echo-bot.py
```

Бот должен отвечать на команду `/start` сообщением `Привет! Я бот :)`. \
Бот должен отвечать на команду `/help` сообщением `Я помогу тебе с любым вопросом`.